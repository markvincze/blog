<!DOCTYPE html>
<html lang="en">

<head>
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-72523215-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-72523215-1');
  </script>

  <title>Jumpstart F# web development: F# with Suave.IO on .NET Core</title>

  <link rel="stylesheet" href="/styles/styles.css">
  <script defer src="https://use.fontawesome.com/releases/v5.15.1/js/all.js"></script>
  <script defer src="/scripts/scripts.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />

  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="manifest" href="site.webmanifest">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="An introduction to get started with web development in F#, using the Suave web framework on .NET Core." />
  <meta property="og:url" content="https://blog.markvincze.com/jumpstart-f-web-development-f-with-suave-io-on-net-core/" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Jumpstart F# web development: F# with Suave.IO on .NET Core" />
  <meta property="og:description" content="An introduction to get started with web development in F#, using the Suave web framework on .NET Core." />
  <meta property="og:site_name" content="Mark Vincze" />
  
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@mrkvincze" />
  <meta name="twitter:title" content="Jumpstart F# web development: F# with Suave.IO on .NET Core" />
  <meta name="twitter:description" content="An introduction to get started with web development in F#, using the Suave web framework on .NET Core." />
  

</head>

<body>
  <div class="navbar-container">
    <nav class="navbar container is-max-desktop" role="navigation" aria-label="main navigation">
      <div class="navbar-brand">

        <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarMenu">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div id="navbarMenu" class="navbar-menu has-text-white-ter">

        <div class="navbar-start">
          
          <a class="navbar-item" href="/">About</a>
          
          <a class="navbar-item" href="/posts">Blog</a>
          
          <a class="navbar-item" href="/projects">Projects</a>
          
          <a class="navbar-item" href="/cv.html">Resume</a>
          
        </div>

        <div class="navbar-end pt-2 ml-2">
          <a class="icon is-medium" href="https://twitter.com/mrkvincze" target="_blank">
            <i class="fab fa-lg fa-twitter"></i>
          </a>
          <a class="icon is-medium" href="https://www.github.com/markvincze" target="_blank">
            <i class="fab fa-lg fa-github"></i>
          </a>
          <a class="icon is-medium" href="https://stackoverflow.com/users/974733/mark-vincze" target="_blank">
            <i class="fab fa-lg fa-stack-overflow"></i>
          </a>
          <a class="icon is-medium" href="https://www.linkedin.com/in/markvincze" target="_blank">
            <i class="fab fa-lg fa-linkedin"></i>
          </a>
          <a class="icon is-medium" href="/index.xml" target="_blank">
            <i class="fas fa-lg fa-rss"></i>
          </a>
        </div>
      </div>
    </nav>
  </div>

  <div class="hero-body">
    <div class="container has-text-centered">
      <a href="/">
        <h1 class="title is-2">
          Mark Vincze
        </h1>
      </a>
      <h2 class="subtitle is-5">
        Software Developer
      </h2>
    </div>
  </div>

  

<section class="section">
  <div class="container is-max-desktop">
    <h1 class="title is-1">Jumpstart F# web development: F# with Suave.IO on .NET Core</h1>

    
      


<p class="mb-3 is-vcentered">
  <time class="has-text-grey" datetime="2017-03-12">Mar 12, 2017 &bull;</time>

  
  
  <a class="button is-link is-light is-primary is-small p-2 mr-1 is-uppercase has-text-weight-semibold" style="height: 2em; margin-top: 0.1em" href="https://blog.markvincze.com/tags/.net-core/">.net-core</a>
  
  
  <a class="button is-link is-light is-primary is-small p-2 mr-1 is-uppercase has-text-weight-semibold" style="height: 2em; margin-top: 0.1em" href="https://blog.markvincze.com/tags/f%23/">f#</a>
  
  
  <a class="button is-link is-light is-primary is-small p-2 mr-1 is-uppercase has-text-weight-semibold" style="height: 2em; margin-top: 0.1em" href="https://blog.markvincze.com/tags/suave/">suave</a>
  

</p>
    

    <article class="content mt-6">
      <p>In a <a href="/jumpstart-f-web-development-f-with-suave-io-on-classic-net/">previous post</a> we&rsquo;ve seen how we can create a simple web application with Suave on the full .NET Framework.
In the last post of the <a href="/series-jumpstart-f-web-development">series</a> we&rsquo;ll take a look at how we can do the same thing on .NET Core.</p>
<p>This is gonna be a short post, since there are no real gotchas in this scenario, it&rsquo;s really easy to set everything up.</p>
<p><strong>Note</strong>: In this post I will use the new csproj-based .NET tooling. Since the project.json-based tooling is deprecated, I don&rsquo;t think anybody should invest in using it any more. I was using version <strong>1.0.1</strong> of the <code>dotnet</code> CLI when writing this post.</p>
<h1 id="create-a-suave-app-on-net-core">Create a Suave app on .NET Core</h1>
<p>Let&rsquo;s start by creating a new F# project. Since a Suave web app is just a Console app in which we fire up our web server, we can use the Console project template.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mkdir mysuaveapp
cd mysuaveapp
dotnet new console -lang f#
</code></pre></div><p>Then add the package Suave as a dependency.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">dotnet add package Suave
</code></pre></div><p>Now we can implement a simple web application.
This is what the <code>console</code> template scaffolded for us by default in the <code>Program.fs</code> file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">open</span> System

<span style="color:#f92672">[&lt;</span>EntryPoint<span style="color:#f92672">&gt;]</span>
<span style="color:#66d9ef">let</span> main argv <span style="color:#f92672">=</span>
    printfn <span style="color:#e6db74">&#34;Hello World from F#!&#34;</span>
    0
</code></pre></div><p>Modify this to have the following content, starting up a Suave web app with a couple of routes.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#66d9ef">open</span> Suave
<span style="color:#66d9ef">open</span> Suave.Filters
<span style="color:#66d9ef">open</span> Suave.Operators
<span style="color:#66d9ef">open</span> Suave.Successful

<span style="color:#66d9ef">let</span> app <span style="color:#f92672">=</span>
    choose
        <span style="color:#f92672">[</span> GET <span style="color:#f92672">&gt;=&gt;</span> choose
            <span style="color:#f92672">[</span> path <span style="color:#e6db74">&#34;/&#34;</span> <span style="color:#f92672">&gt;=&gt;</span> OK <span style="color:#e6db74">&#34;Index&#34;</span>
              path <span style="color:#e6db74">&#34;/hello&#34;</span> <span style="color:#f92672">&gt;=&gt;</span> OK <span style="color:#e6db74">&#34;Hello!&#34;</span> <span style="color:#f92672">]</span>
          POST <span style="color:#f92672">&gt;=&gt;</span> choose
            <span style="color:#f92672">[</span> path <span style="color:#e6db74">&#34;/hello&#34;</span> <span style="color:#f92672">&gt;=&gt;</span> OK <span style="color:#e6db74">&#34;Hello POST!&#34;</span> <span style="color:#f92672">]</span> <span style="color:#f92672">]</span>

<span style="color:#f92672">[&lt;</span>EntryPoint<span style="color:#f92672">&gt;]</span>
<span style="color:#66d9ef">let</span> main argv <span style="color:#f92672">=</span>
    startWebServer defaultConfig app
    0
</code></pre></div><p>The last thing we have to do is restore the dependencies and start up our app.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">dotnet restore
dotnet run
</code></pre></div><p>That&rsquo;s it! Our app should be running, and we can open it by navigating to http://localhost:8080.
I also uploaded a working example to <a href="https://github.com/markvincze/jumpstart-netcore-suave">this Github repository</a>.</p>
<h1 id="different-ways-to-run-suave">Different ways to run Suave</h1>
<p>In the above example we are running Suave directly on top of .NET Core using the web server built-in the library. However, since .NET Core is modular, that&rsquo;s not the only option. We can also run Suave on top of the web server created for ASP.NET Core called Kestrel, or we can even run it on top of ASP.NET Core using a special middleware.</p>
<p><img src="/images/2017/03/suave-options.png" alt="Different options to run Suave on .NET Core"  style="display:block; margin: auto;" /></p>
<p>We can do this with the following packages.</p>
<ul>
<li><a href="https://github.com/Krzysztof-Cieslak/Suave.Kestrel">Suave.Kestrel</a>: Run Suave on top of the Kestrel web server. (This is a early proof of concept implementation, and doesn&rsquo;t seem to be actively worked on any more.)</li>
<li><a href="https://github.com/SuaveIO/Suave.AspNetCore">Suave.AspNetCore</a>: Run Suave on top of ASP.NET Core, using a middleware to connect the two frameworks together. This library seems to be more actively developed, and with this we can even combine ASP.NET and Suave endpoints in the same application.</li>
</ul>
<h1 id="f-tooling-issues">F# tooling issues</h1>
<p>As described on <a href="https://github.com/dotnet/netcorecli-fsc/wiki/.NET-Core-SDK-1.0.1#ide-support">this Github page</a>, at the moment there are some issues with the current version of the FSharp SDK and the Ionide extension (which is used in VSCode for F# development). The extension does not work with the 1.0 version of the SDK.
The workaround to get it to work is to change the version to <code>1.0.0-beta-060000</code>, and to add a reference to the tool <code>dotnet-compile-fsc</code>. I did this change in the repo on the <a href="https://github.com/markvincze/jumpstart-netcore-suave/tree/vscode-inoide-workaround">this branch</a>.</p>
<p>Also, if you are using VSCode, you have to do <code>dotnet build</code> from the terminal before starting the editor to make it work properly.</p>
<p>With the release of the 1.0 version of the new csproj-based dotnet tooling, I expect all the problems related to editor integration and tooling to be fixed soon.</p>

    </article>

    
    <div id="disqus_thread"></div>
    <script>
      var disqus_config = function () {
        this.page.url = 'https:\/\/blog.markvincze.com\/jumpstart-f-web-development-f-with-suave-io-on-net-core\/';
        
        this.page.identifier = 'ghost-33';
        
      };
      (function () { 
        var d = document, s = d.createElement('script');
        s.src = 'https://markvinczeblog.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
  

</section>



  <div style="flex: 1"></div>

  <footer class="footer py-6">
    <div class="content has-text-centered">
      <p>
        © 2020 <strong>Mark Vincze</strong>. All rights reserved.<br />
        Built with <a href="https://gohugo.io/">Hugo</a> and <a href="https://bulma.io/">Bulma</a>. 💙
      </p>
    </div>
  </footer>

</body>

</html>